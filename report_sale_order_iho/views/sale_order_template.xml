<?xml version="1.0"?>
<odoo>
    <template id="report_sale_order_inherit_external_for_iho" inherit_id="sale_stock.report_saleorder_document_inherit_sale_stock">
        <xpath expr="//div[1]" position="replace"/>
    </template>
    <template id="report_sale_order_external_for_iho" inherit_id="sale.report_saleorder_document">
        <xpath expr="//t/t[1]" position="replace">
            <t t-set="doc" t-value="doc.with_context({'lang':doc.partner_id.lang})"/>
            <t t-call="web.html_container">
                <!-- <div class="header"><div/></div>-->
                <t t-call="web.internal_layout">
                    <div class="page">
                        <div class="row" style="padding-top:10px;padding-button:16px;">
                            <div class="col pull-left">
                                <table style="font-size:15px;line-height: 16px;">
                                    <tr>
                                        <td style="height: 80px; width: 150px;">
                                            <span role="img" t-att-aria-label="'Logo of %s' % res_company.name" t-att-title="res_company.name" t-field="res_company.logo" t-options="{'widget': 'image'}"/>
                                            <br/>
                                            <br/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="color: gray;">
                                            <strong>Partner: </strong>
                                        </td>
                                        <td>
                                            <span t-field="doc.partner_id"/>
                                        </td>
                                    </tr>
                                    <tr t-if="not doc.partner_id.parent_id">
                                        <td style="color: gray;">
                                            <strong>Address: </strong>
                                        </td>
                                        <td>
                                            <span t-field="doc.partner_id.street"/> <span t-field="doc.partner_id.city_id.name"/> <span t-field="doc.partner_id.state_id.name"/> <span t-field="doc.partner_id.zip"/>
                                        </td>
                                    </tr>
                                    <tr t-if="doc.partner_id.parent_id">
                                        <td style="color: gray;">
                                            <strong>Address: </strong>
                                        </td>
                                        <td>
                                            <span t-field="doc.partner_id.parent_id.street"/> <span t-field="doc.partner_id.parent_id.city_id.name"/> <span t-field="doc.partner_id.parent_id.state_id.name"/> <span t-field="doc.partner_id.parent_id.zip"/>
                                        </td>
                                    </tr>


                                    <tr>
                                        <td style="color: gray;">
                                            <strong>Email: </strong>
                                        </td>
                                        <td>
                                            <span t-field="doc.partner_id.email"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="color: gray;">
                                            <strong>Phone: </strong>
                                        </td>
                                        <td>
                                            <span t-field="doc.partner_id.phone"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="color: gray;">
                                            <strong>Quotation: &amp;nbsp;</strong>
                                        </td>
                                        <td>
                                            <span t-field="doc.name"/>-
                                            <span t-field="doc.active_version_name"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="color: gray;">
                                            <strong>Date: </strong>
                                        </td>
                                        <td>
                                            <span t-field="doc.active_version_id.date_order" t-field-options="{&quot;format&quot;: &quot;dd/MM/yyyy&quot;}"/>
                                        </td>
                                    </tr>
                                </table>
                                <br/>
                            </div>
                        </div>
                        <!-- Is there a discount on at least one line? -->
                        <div class="row">
                            <br/>
                            <table class="table table-bordered" style="font-size:12px; padding-left:20px;">
                                <thead>
                                    <tr style="background-color: #F04E23; color: #ffffff;">
                                        <th class="text-left" style="width: 10px;">
                                            <strong>Item</strong>
                                        </th>
                                        <th class="text-center">
                                            <strong>Quantity</strong>
                                        </th>
                                        <th class="text-center">
                                            <strong>Code</strong>
                                        </th>
                                        <th class="text-left">
                                            <strong>Description</strong>
                                        </th>
                                        <th class="text-center" t-if="doc.find_images() != False">
                                            <strong>photo</strong>
                                        </th>
                                        <th class="text-right">
                                            <strong>Unit Price</strong>
                                        </th>
                                        <th class="text-right">
                                            <strong>Total Price</strong>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="sale_tbody">
                                    <t t-set="current_subtotal" t-value="0"/>
                                    <t t-set="row_count" t-value="1"/>
                                    <t t-as="line" t-foreach="doc.order_line">
                                        <t groups="account.group_show_line_subtotals_tax_excluded" t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal"/>
                                        <t groups="account.group_show_line_subtotals_tax_included" t-set="current_subtotal" t-value="current_subtotal + line.price_total"/>
                                        <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                            <t t-if="not line.display_type">
                                                <td>
                                                    <span t-esc="row_count"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="int(line.product_uom_qty)"/>
                                                </td>
                                                <t t-set="dummy" t-value="doc.env.ref('sif_interface.product_product_dummy').id"/>

                                                <t t-if="line.product_id.id == dummy">
                                                <!-- <td t-if="line.product_id.id == dummy">     -->
                                                    <td>
                                                        <t t-set="dummy_code" t-value="doc._return_code(line.name)"/>
                                                        <span t-esc="dummy_code"/>
                                                    </td>
                                                    <td>
                                                        <t t-set="dummy_descr" t-value="doc._return_description(line.name)"/>
                                                        <span t-esc="dummy_descr"/>
                                                    </td>
                                                </t>
                                                <t t-if="line.product_id.id != dummy">
                                                    <td>    
                                                        <span t-field="line.product_id.code"/>
                                                    </td>
                                                    <td>
                                                        <span t-field="line.name"/>
                                                    </td>
                                                </t>
<!--                                                 <td t-if="line.product_id.id != dummy">    
                                                    <span t-field="line.product_id.code"/>
                                                </td> -->
                                                <!-- <td>
                                                    <span t-field="line.name"/>
                                                </td> -->
                                                <td t-if="doc.find_images() != False">
                                                    <span role="img" t-field="line.image_sol" t-if="line.image_sol" t-options="{'widget': 'image'}"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="line.price_unit" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                                </td>
                                                <td class="text-right o_price_total">
                                                    <span groups="account.group_show_line_subtotals_tax_excluded" t-field="line.price_subtotal"/>
                                                    <span groups="account.group_show_line_subtotals_tax_included" t-field="line.price_total"/>
                                                </td>
                                            </t>
                                            <t t-if="line.display_type == 'line_note'">
                                                <td t-att-colspan="colspan">
                                                    <span t-field="line.name"/>
                                                </td>
                                            </t>
                                        </tr>
                                        <t t-if="current_section and (line_last or doc.order_line[line_index+1].display_type == 'line_section')">
                                            <tr class="is-subtotal text-right">
                                                <td t-att-colspan="colspan">
                                                    <strong class="mr16">Subtotal</strong>
                                                    <span t-esc="current_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                                </td>
                                            </tr>
                                        </t>
                                        <tr t-if="line.display_type == 'line_section'">
                                            <td colspan="7">
                                                <span role="img" t-field="line.image_sol" t-if="line.image_sol" t-options="{'widget': 'image'}"/>
                                            </td>
                                        </tr>
                                        <t t-if="not line.display_type" t-set="row_count" t-value="row_count+1"/>
                                        <!-- </t></t>-->
                                    </t>
                                    <t t-as="line_o" t-foreach="doc.sale_order_option_ids">
                                        <t t-if="line_o">
                                            <tr>
                                                <td colspan="4">Optional Products</td>
                                            </tr>
                                            <tr>
                                                <th class="text-center">
                                                    <strong>Quantity</strong>
                                                </th>
                                                <th class="text-center">
                                                    <strong>Code</strong>
                                                </th>
                                                <th class="text-left">
                                                    <strong>Description</strong>
                                                </th>
                                                <th class="text-right">
                                                    <strong>Unit Price</strong>
                                                </th>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span t-field="line_o.quantity"/>
                                                </td>
                                                <td>
                                                    <span t-field="line_o.product_id.code"/>
                                                </td>
                                                <td>
                                                    <span t-field="line_o.name"/>
                                                </td>
                                                <td>
                                                    <span t-field="line_o.price_unit"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                        <div name="payment_term"/>
                        <div class="row col-7 pull-right">
                            <table class="table table-xs table-condensed" style="font-size:12px;line-height: 2px;">

                            <t t-if="doc.amount_services">
                                <tr class="border-black o_subtotal">
                                    <td class="text-right" colspan="2" style="width:100%">
                                        <strong>Subtotal</strong>
                                    </td>
                                    <td class="text-right">
                                        <span t-esc="float(doc.amount_untaxed - doc.amount_services)" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                    </td>
                                </tr>
                                <tr class="border-black">
                                    <td class="text-right" colspan="2" style="width:100%;">
                                        <strong>Export services, freight and installation</strong>
                                    </td>
                                    <td class="text-right o_price_total border-black">
                                        <span t-esc="float(doc.amount_services)" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.currency_id}"/>
                                    </td>
                                </tr>
                            </t>
                                <tr class="border-black o_total">
                                    <td class="text-right" colspan="2" style="width:100%">
                                        <strong>Total</strong>
                                    </td>
                                    <td class="text-right">
                                        <span t-esc="float(doc.amount_untaxed)" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col">
                                <strong>
                                    <h6>
                                        <u>Terms and Conditions for the Sale of goods supplied by IHO.</u>
                                    </h6>
                                </strong>
                                <br/>
                                <t t-as="sale_term" t-foreach="doc.sale_order_term_ids">
                                    <span t-field="sale_term.name"/>
                                </t>
                            </div>
                        </div>
                    </div>
                </t>
                <div class="footer">
                    <div class="row" style="background-color: #F04E23; height: 4px; width: 1000px;"/>
                    <div class="pull-left">
                        <div class="text-center" style="margin-left:350px; font-size:12px;">
                            <span t-field="res_company.website"/>
                            <br/>
                            <span t-field="res_company.street"/>,
                                
                            
                            
                            <span t-field="res_company.city"/>
                            <span t-field="res_company.zip"/>
                            <br/>
                            <span t-field="res_company.phone"/>
                            <br/></div>
                    </div>
                    <div class="pull-right" style="height: 90px; width: 80px;">
                        <span role="img" t-att-aria-label="'Logo of %s' % res_company.name" t-att-title="res_company.name" t-field="res_company.logo" t-options="{'widget': 'image'}"/>
                    </div>
                </div>
            </t>
        </xpath>
    </template>
</odoo>
